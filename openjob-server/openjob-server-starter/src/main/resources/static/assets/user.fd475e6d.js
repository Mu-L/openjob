import{_ as A}from"./preload-helper.101896b7.js";import{h as D,ap as L,aH as le,ar as M,r as re,K as N,a as ae,o as O,a9 as p,j as B,k as x,D as n,x as o,F as ie,Z as ce,v as ue,B as i,C as f,l as c,u as w,n as P,q as de}from"./vue.bd0669ce.js";import{u as me}from"./vue-i18n.cjs.2a00fe88.js";import{u as fe}from"./userInfo.f7c9dd73.js";import{u as ge}from"./themeConfig.cb88f033.js";import{o as pe}from"./other.08984b33.js";import{e as _e}from"./mitt.7f99bbc0.js";import{L as g,S as be}from"./storage.b628b270.js";import{u as he}from"./index.32164f71.js";import{f as we}from"./index.ee56f1f7.js";import{u as ve}from"./index.6abbbed7.js";import{d as Ce}from"./default-avatar.bcd96d0c.js";import{ay as Se}from"./index.e8f4f9cf.js";import{J as Ee}from"./index.f64fca3a.js";import{_ as ke}from"./_plugin-vue_export-helper.c27b6911.js";import"./_commonjsHelpers.35101cd5.js";import"./index.23f37e21.js";import"./index.aa7cec2e.js";import"./keepAliveNames.f05bad75.js";import"./routesList.32d6bb58.js";import"./loading.3e617409.js";import"./tagsViewRoutes.054c4a6f.js";import"./request.554ad02f.js";import"./index.23ad033a.js";import"./toolsValidate.7cb139e2.js";const q=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],_=(()=>{if(typeof document>"u")return!1;const l=q[0],r={};for(const s of q)if((s==null?void 0:s[1])in document){for(const[h,v]of s.entries())r[l[h]]=v;return r}return!1})(),R={change:_.fullscreenchange,error:_.fullscreenerror};let u={request(l=document.documentElement,r){return new Promise((s,b)=>{const h=()=>{u.off("change",h),s()};u.on("change",h);const v=l[_.requestFullscreen](r);v instanceof Promise&&v.then(h).catch(b)})},exit(){return new Promise((l,r)=>{if(!u.isFullscreen){l();return}const s=()=>{u.off("change",s),l()};u.on("change",s);const b=document[_.exitFullscreen]();b instanceof Promise&&b.then(s).catch(r)})},toggle(l,r){return u.isFullscreen?u.exit():u.request(l,r)},onchange(l){u.on("change",l)},onerror(l){u.on("error",l)},on(l,r){const s=R[l];s&&document.addEventListener(s,r,!1)},off(l,r){const s=R[l];s&&document.removeEventListener(s,r,!1)},raw:_};Object.defineProperties(u,{isFullscreen:{get:()=>Boolean(document[_.fullscreenElement])},element:{enumerable:!0,get:()=>document[_.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>Boolean(document[_.fullscreenEnabled])}});_||(u={isEnabled:!1});const z=u,Fe={class:"layout-navbars-breadcrumb-user-icon"},ye={class:"layout-navbars-breadcrumb-user-icon"},ze=["title"],Ie={class:"layout-navbars-breadcrumb-user-icon"},Be=["title"],Te=["title"],$e={class:"layout-navbars-breadcrumb-user-icon"},Ae=["title"],Le={class:"layout-navbars-breadcrumb-user-link"},Me=["src"],Ne=D({name:"layoutBreadcrumbUser"}),Oe=D({...Ne,setup(l){const r=he(),s=ve(),b=L(()=>A(()=>import("./userNews.95bf4b7f.js"),["assets/userNews.95bf4b7f.js","assets/vue.bd0669ce.js","assets/_plugin-vue_export-helper.c27b6911.js","assets/userNews.a45651b4.css"])),h=L(()=>A(()=>import("./search.b0510d95.js"),["assets/search.b0510d95.js","assets/vue.bd0669ce.js","assets/vue-i18n.cjs.2a00fe88.js","assets/_commonjsHelpers.35101cd5.js","assets/tagsViewRoutes.054c4a6f.js","assets/storage.b628b270.js","assets/_plugin-vue_export-helper.c27b6911.js","assets/search.3305851d.css"])),{locale:v,t:S}=me(),V=le(),j=fe(),H=ge(),{userInfos:T}=M(j),{themeConfig:E}=M(H),$=re(),C=N({current:"default",list:[]}),d=N({isScreenfull:!1,disabledI18n:"zh-cn",disabledSize:"large"}),U=ae(()=>{let e="";const{layout:m,isClassicSplitMenu:a}=E.value;return["defaults","columns"].includes(m)||m==="classic"&&!a?e="1":e="",e});O(()=>{Q()});const J=()=>{if(!z.isEnabled)return Se.warning("暂不不支持全屏"),!1;z.toggle(),z.on("change",()=>{z.isFullscreen?d.isScreenfull=!0:d.isScreenfull=!1})},K=()=>{_e.emit("openSetingsDrawer")},Z=e=>{e==="logOut"?Ee({closeOnClickModal:!1,closeOnPressEscape:!1,title:S("message.user.logOutTitle"),message:S("message.user.logOutMessage"),showCancelButton:!0,confirmButtonText:S("message.user.logOutConfirm"),cancelButtonText:S("message.user.logOutCancel"),buttonSize:"default",beforeClose:(m,a,t)=>{m==="confirm"?(a.confirmButtonLoading=!0,a.confirmButtonText=S("message.user.logOutExit"),setTimeout(()=>{t(),setTimeout(()=>{a.confirmButtonLoading=!1},300)},700)):t()}}).then(async()=>{await r.logout(),be.clear(),window.location.reload()}).catch(()=>{}):e==="wareHouse"?window.open("https://github.com/open-job/openjob"):V.push(e)},G=()=>{$.value.openSearch()},Q=async()=>{let e=await s.getList({page:1,size:30});C.list=[];let m=0,a=g.get("nid");e.list.forEach(function(t){m===0&&a==null&&(C.current=t.name,g.set("nid",t.id)),C.list.push({id:t.id,name:t.name,status:t.status===1,uniqueId:t.uuid,createTime:t.createTime}),a!=null&&a===t.id&&(C.current=t.name),m++})},W=e=>{g.remove("nid"),g.set("nid",e),window.location.reload()},X=e=>{g.remove("themeConfig"),E.value.globalComponentSize=e,g.set("themeConfig",E.value),k("globalComponentSize","disabledSize"),window.location.reload()},Y=e=>{g.remove("themeConfig"),E.value.globalI18n=e,g.set("themeConfig",E.value),v.value=e,pe.useTitle(),k("globalI18n","disabledI18n")},k=(e,m)=>{d[m]=g.get("themeConfig")[e]};return O(()=>{g.get("themeConfig")&&(k("globalComponentSize","disabledSize"),k("globalI18n","disabledI18n"))}),(e,m)=>{const a=p("el-icon"),t=p("el-dropdown-item"),F=p("el-dropdown-menu"),y=p("el-dropdown"),ee=p("ele-Search"),ne=p("ele-Bell"),oe=p("el-badge"),te=p("el-popover"),se=p("ele-ArrowDown");return B(),x("div",{class:"layout-navbars-breadcrumb-user pr15",style:de({flex:w(U)})},[n(y,{"show-timeout":70,"hide-timeout":50,trigger:"click",onCommand:W},{dropdown:o(()=>[n(F,null,{default:o(()=>[(B(!0),x(ie,null,ce(C.list,I=>(B(),ue(t,{key:I.id,command:I.id},{default:o(()=>[i(f(I.name),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:o(()=>[c("div",Fe,[i(f(C.current)+" ",1),n(a,{class:"el-icon--right"},{default:o(()=>[n(w(we))]),_:1})])]),_:1}),n(y,{"show-timeout":70,"hide-timeout":50,trigger:"click",onCommand:X},{dropdown:o(()=>[n(F,null,{default:o(()=>[n(t,{command:"large",disabled:d.disabledSize==="large"},{default:o(()=>[i(f(e.$t("message.user.dropdownLarge")),1)]),_:1},8,["disabled"]),n(t,{command:"default",disabled:d.disabledSize==="default"},{default:o(()=>[i(f(e.$t("message.user.dropdownDefault")),1)]),_:1},8,["disabled"]),n(t,{command:"small",disabled:d.disabledSize==="small"},{default:o(()=>[i(f(e.$t("message.user.dropdownSmall")),1)]),_:1},8,["disabled"])]),_:1})]),default:o(()=>[c("div",ye,[c("i",{class:"iconfont icon-ziti",title:e.$t("message.user.title0")},null,8,ze)])]),_:1}),n(y,{"show-timeout":70,"hide-timeout":50,trigger:"click",onCommand:Y},{dropdown:o(()=>[n(F,null,{default:o(()=>[n(t,{command:"zh-cn",disabled:d.disabledI18n==="zh-cn"},{default:o(()=>[i("简体中文")]),_:1},8,["disabled"]),n(t,{command:"en",disabled:d.disabledI18n==="en"},{default:o(()=>[i("English")]),_:1},8,["disabled"]),n(t,{command:"zh-tw",disabled:d.disabledI18n==="zh-tw"},{default:o(()=>[i("繁體中文")]),_:1},8,["disabled"])]),_:1})]),default:o(()=>[c("div",Ie,[c("i",{class:P(["iconfont",d.disabledI18n==="en"?"icon-fuhao-yingwen":"icon-fuhao-zhongwen"]),title:e.$t("message.user.title1")},null,10,Be)])]),_:1}),c("div",{class:"layout-navbars-breadcrumb-user-icon",onClick:G},[n(a,{title:e.$t("message.user.title2")},{default:o(()=>[n(ee)]),_:1},8,["title"])]),c("div",{class:"layout-navbars-breadcrumb-user-icon",onClick:K},[c("i",{class:"icon-skin iconfont",title:e.$t("message.user.title3")},null,8,Te)]),c("div",$e,[n(te,{placement:"bottom",trigger:"click",transition:"el-zoom-in-top",width:300,persistent:!1},{reference:o(()=>[n(oe,{"is-dot":!0},{default:o(()=>[n(a,{title:e.$t("message.user.title4")},{default:o(()=>[n(ne)]),_:1},8,["title"])]),_:1})]),default:o(()=>[n(w(b))]),_:1})]),c("div",{class:"layout-navbars-breadcrumb-user-icon mr10",onClick:J},[c("i",{class:P(["iconfont",d.isScreenfull?"icon-tuichuquanping":"icon-fullscreen"]),title:d.isScreenfull?e.$t("message.user.title6"):e.$t("message.user.title5")},null,10,Ae)]),n(y,{"show-timeout":70,"hide-timeout":50,onCommand:Z},{dropdown:o(()=>[n(F,null,{default:o(()=>[n(t,{command:"/dashboard"},{default:o(()=>[i(f(e.$t("message.user.dropdown1")),1)]),_:1}),n(t,{command:"wareHouse"},{default:o(()=>[i(f(e.$t("message.user.dropdown6")),1)]),_:1}),n(t,{command:"/personal"},{default:o(()=>[i(f(e.$t("message.user.dropdown2")),1)]),_:1}),n(t,{divided:"",command:"logOut"},{default:o(()=>[i(f(e.$t("message.user.dropdown5")),1)]),_:1})]),_:1})]),default:o(()=>[c("span",Le,[c("img",{src:w(Ce),class:"layout-navbars-breadcrumb-user-link-photo mr5"},null,8,Me),i(" "+f(w(T).userName===""?"common":w(T).userName)+" ",1),n(a,{class:"el-icon--right"},{default:o(()=>[n(se)]),_:1})])]),_:1}),n(w(h),{ref_key:"searchRef",ref:$},null,512)],4)}}});const cn=ke(Oe,[["__scopeId","data-v-0cbe3f20"]]);export{cn as default};
